import{r as t,c as i,h as e,H as o,g as n}from"./p-c1f86727.js";import{g as r}from"./p-9c90d370.js";import{g as s}from"./p-4a8cec5c.js";var c="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,l=c||a||Function("return this")(),u=l.Symbol,f=Object.prototype,h=f.hasOwnProperty,b=f.toString,d=u?u.toStringTag:void 0,m=Object.prototype.toString,p=u?u.toStringTag:void 0;function v(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":p&&p in Object(t)?function(t){var i=h.call(t,d),e=t[d];try{t[d]=void 0;var o=!0}catch(r){}var n=b.call(t);return o&&(i?t[d]=e:delete t[d]),n}(t):function(t){return m.call(t)}(t)}function x(t){return null!=t&&"object"==typeof t}var g=Array.isArray;function y(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}var j=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,F=/^0o[0-7]+$/i,D=parseInt;function I(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||x(t)&&"[object Symbol]"==v(t)}(t))return NaN;if(y(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=y(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(j,"");var e=k.test(t);return e||F.test(t)?D(t.slice(2),e?2:8):w.test(t)?NaN:+t}function A(t){return t}var O=/^(?:0|[1-9]\d*)$/;function E(t,i){var e=typeof t;return!!(i=null==i?9007199254740991:i)&&("number"==e||"symbol"!=e&&O.test(t))&&t>-1&&t%1==0&&t<i}function C(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var T=Object.prototype;function N(t){return x(t)&&"[object Arguments]"==v(t)}var L=Object.prototype,z=L.hasOwnProperty,H=L.propertyIsEnumerable,$=N(function(){return arguments}())?N:function(t){return x(t)&&z.call(t,"callee")&&!H.call(t,"callee")},B="object"==typeof exports&&exports&&!exports.nodeType&&exports,S=B&&"object"==typeof module&&module&&!module.nodeType&&module,U=S&&S.exports===B?l.Buffer:void 0,K=(U?U.isBuffer:void 0)||function(){return!1},M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Arguments]"]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object Boolean]"]=M["[object DataView]"]=M["[object Date]"]=M["[object Error]"]=M["[object Function]"]=M["[object Map]"]=M["[object Number]"]=M["[object Object]"]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object WeakMap]"]=!1;var P,W="object"==typeof exports&&exports&&!exports.nodeType&&exports,G=W&&"object"==typeof module&&module&&!module.nodeType&&module,R=G&&G.exports===W&&c.process,V=function(){try{return G&&G.require&&G.require("util").types||R&&R.binding&&R.binding("util")}catch(t){}}(),_=V&&V.isTypedArray,q=_?(P=_,function(t){return P(t)}):function(t){return x(t)&&C(t.length)&&!!M[v(t)]},J=Object.prototype.hasOwnProperty;var Q=Object.prototype.hasOwnProperty;function X(t){return null!=(i=t)&&C(i.length)&&!function(t){if(!y(t))return!1;var i=v(t);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}(i)?function(t,i){var e=g(t),o=!e&&$(t),n=!e&&!o&&K(t),r=!e&&!o&&!n&&q(t),s=e||o||n||r,c=s?function(t,i){for(var e=-1,o=Array(t);++e<t;)o[e]=i(e);return o}(t.length,String):[],a=c.length;for(var l in t)!i&&!J.call(t,l)||s&&("length"==l||n&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||E(l,a))||c.push(l);return c}(t,!0):function(t){if(!y(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i,e,o=(i=t)===("function"==typeof(e=i&&i.constructor)&&e.prototype||T),n=[];for(var r in t)("constructor"!=r||!o&&Q.call(t,r))&&n.push(r);return n}(t);var i}var Y=function(){return l.Date.now()},Z=Math.max,tt=Math.min;function it(t,i){return null==t?t:function(t,i,e){for(var o=-1,n=Object(t),r=e(t),s=r.length;s--;){var c=r[++o];if(!1===i(n[c],c,n))break}return t}(t,"function"==typeof(e=i)?e:A,X);var e}const et=class{constructor(e){t(this,e),this.calciteLookupChange=i(this,"calciteLookupChange",7),this.calciteComboboxChipDismiss=i(this,"calciteComboboxChipDismiss",7),this.active=!1,this.disabled=!1,this.scale="m",this.items=[],this.selectedItems=[],this.visibleItems=[],this.textInput=null,this.observer=null,this.inputHandler=t=>{this.filterItems(t.target.value)},this.filterItems=function(t,i,e){var o,n,r,s,c,a,l=0,u=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(i){var e=o,r=n;return o=n=void 0,l=i,s=t.apply(r,e)}function d(t){return l=t,c=setTimeout(p,i),u?b(t):s}function m(t){var e=t-a;return void 0===a||e>=i||e<0||f&&t-l>=r}function p(){var t=Y();if(m(t))return v(t);c=setTimeout(p,function(t){var e=i-(t-a);return f?tt(e,r-(t-l)):e}(t))}function v(t){return c=void 0,h&&o?b(t):(o=n=void 0,s)}function x(){var t=Y(),e=m(t);if(o=arguments,n=this,a=t,e){if(void 0===c)return d(a);if(f)return clearTimeout(c),c=setTimeout(p,i),b(a)}return void 0===c&&(c=setTimeout(p,i)),s}return i=I(i)||0,y(e)&&(u=!!e.leading,r=(f="maxWait"in e)?Z(I(e.maxWait)||0,i):r,h="trailing"in e?!!e.trailing:h),x.cancel=function(){void 0!==c&&clearTimeout(c),l=0,o=a=n=c=void 0},x.flush=function(){return void 0===c?s:v(Y())},x}(t=>{const i=((t,i)=>{const e=new RegExp(i,"ig");0===t.length&&console.warn("No data was passed to the filter function.\n    The data argument should be an array of objects");const o=(t,i)=>{let e=!1;return it(t,t=>{"function"!=typeof t&&(Array.isArray(t)||"object"==typeof t&&null!==t?o(t,i)&&(e=!0):i.test(t)&&(e=!0))}),e};return t.filter(t=>o(t,e))})(this.data,t).map(t=>t.value);this.items.forEach(t=>{t.hidden=-1===i.indexOf(t.value);const{parentItem:e}=t;e&&(-1!==i.indexOf(e.value)&&(t.hidden=!1),-1!==i.indexOf(t.value)&&(e.hidden=!1))}),this.visibleItems=this.getVisibleItems()},100),this.comboboxFocusHandler=t=>{this.active="focusin"===t.type}}connectedCallback(){["s","m","l"].includes(this.scale)||(this.scale="m"),this.observer=new MutationObserver(this.updateItems)}componentWillLoad(){this.updateItems()}componentDidLoad(){var t;null===(t=this.observer)||void 0===t||t.observe(this.el,{childList:!0,subtree:!0})}componentDidUnload(){var t;null===(t=this.observer)||void 0===t||t.disconnect()}calciteComboboxItemChangeHandler(t){this.toggleSelection(t.detail)}calciteChipDismissHandler(t){var i;this.textInput.focus();const e=null===(i=t.detail)||void 0===i?void 0:i.value,o=this.items.find(t=>t.value===e);o&&this.toggleSelection(o,!1)}handleInputKeyDown(t){if(t.target===this.textInput){const i=s(t.key);if(t.shiftKey&&"Tab"===i)return;"Escape"===i?this.active=!1:"ArrowDown"===i?this.focusFirstItem():"ArrowUp"===i?this.focusLastItem():(this.active=!0,this.textInput.focus())}}toggleSelection(t,i=!t.selected){t.selected=i,this.selectedItems=this.getSelectedItems(),this.calciteLookupChange.emit(this.selectedItems)}getVisibleItems(){return this.items.filter(t=>!t.hidden)}getSelectedItems(){return this.items.filter(t=>t.selected)}updateItems(){this.items=this.getItems(),this.data=this.getData(),this.selectedItems=this.getSelectedItems(),this.visibleItems=this.getVisibleItems()}getData(){return this.items.map(t=>({value:t.value,label:t.textLabel}))}getItems(){return Array.from(this.el.querySelectorAll("calcite-combobox-item")).filter(t=>!t.disabled).map(t=>{const{parentElement:i}=t;return t.parentItem=i.matches("calcite-combobox-item")?i:null,t})}calciteComboboxItemKeyEventHandler(t){const{item:i,event:e}=t.detail;let o=0===this.itemIndex(i),n=this.itemIndex(i)===this.items.length-1;const r=e.shiftKey;switch(s(e.key)){case"Tab":o&&r&&this.closeCalciteCombobox(),n&&!r?this.closeCalciteCombobox():o&&r?this.textInput.focus():r?this.focusPrevItem(i):this.focusNextItem(i);break;case"ArrowDown":this.focusNextItem(i);break;case"ArrowUp":this.focusPrevItem(i);break;case"Home":this.focusFirstItem();break;case"End":this.focusLastItem();break;case"Escape":this.closeCalciteCombobox()}}closeCalciteCombobox(){this.textInput.focus(),this.active=!1}focusFirstItem(){this.items[0].focus()}focusLastItem(){this.items[this.items.length-1].focus()}focusNextItem(t){const i=this.itemIndex(t);(this.items[i+1]||this.items[0]).focus()}focusPrevItem(t){const i=this.itemIndex(t);(this.items[i-1]||this.items[this.items.length-1]).focus()}itemIndex(t){return this.items.indexOf(t)}render(){const t=r(this.el);return e(o,{active:this.active,onFocusin:this.comboboxFocusHandler,onFocusout:this.comboboxFocusHandler,dir:t},e("div",{class:"selections"},this.selectedItems.map(i=>e("calcite-chip",{key:i.value,scale:this.scale,value:i.value,dir:t,dismissible:!0},i.textLabel))),e("div",{role:"combobox","aria-expanded":this.active.toString(),"aria-owns":"listbox","aria-haspopup":"listbox"},e("input",{type:"text",placeholder:this.placeholder,"aria-label":this.label,"aria-autocomplete":"list","aria-controls":"listbox",onInput:this.inputHandler,disabled:this.disabled,onKeyDown:t=>this.handleInputKeyDown(t),ref:t=>this.textInput=t})),e("ul",{id:"listbox","aria-label":this.label,role:"listbox",class:{list:!0},"aria-multiselectable":"true"},e("slot",null)))}get el(){return n(this)}};et.style=":host([hidden]){display:none}:host-context([theme=dark]){--calcite-ui-blue-1:#00A0FF;--calcite-ui-blue-2:#0087D7;--calcite-ui-blue-3:#47BBFF;--calcite-ui-green-1:#36DA43;--calcite-ui-green-2:#11AD1D;--calcite-ui-green-3:#44ED51;--calcite-ui-yellow-1:#FFC900;--calcite-ui-yellow-2:#F4B000;--calcite-ui-yellow-3:#FFE24D;--calcite-ui-red-1:#FE583E;--calcite-ui-red-2:#F3381B;--calcite-ui-red-3:#FF7465;--calcite-ui-background:#202020;--calcite-ui-foreground-1:#2b2b2b;--calcite-ui-foreground-2:#353535;--calcite-ui-foreground-3:#404040;--calcite-ui-text-1:#ffffff;--calcite-ui-text-2:#bfbfbf;--calcite-ui-text-3:#9f9f9f;--calcite-ui-border-1:#4a4a4a;--calcite-ui-border-2:#404040;--calcite-ui-border-3:#353535;--calcite-ui-border-4:#757575;--calcite-ui-border-5:#9f9f9f}:host([scale=s]){font-size:12px;--calcite-combobox-item-spacing-unit-l:12px;--calcite-combobox-item-spacing-unit-s:8px}:host([scale=m]){font-size:14px;--calcite-combobox-item-spacing-unit-l:16px;--calcite-combobox-item-spacing-unit-s:12px}:host([scale=l]){font-size:16px;--calcite-combobox-item-spacing-unit-l:20px;--calcite-combobox-item-spacing-unit-s:16px}:host{display:block;position:relative}[role=combobox]{display:-ms-flexbox;display:flex}input{-ms-flex-positive:1;flex-grow:1;font-size:inherit;font-family:inherit;padding:var(--calcite-combobox-item-spacing-unit-s) var(--calcite-combobox-item-spacing-unit-l);background-color:var(--calcite-ui-foreground-1);border:1px solid var(--calcite-ui-border-1);color:1px solid var(--calcite-ui-text-1)}input{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}input:focus{outline:2px solid var(--calcite-ui-blue-1);outline-offset:-2px}.list{-webkit-transform:translate3d(0, -1.5rem, 0);transform:translate3d(0, -1.5rem, 0);-webkit-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;visibility:hidden;opacity:0;display:block;position:absolute;left:0;z-index:200;overflow:hidden;max-height:0;width:auto;width:var(--calcite-dropdown-width);background:var(--calcite-ui-foreground-1);border-radius:var(--calcite-border-radius);-webkit-box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);pointer-events:none;margin:0;padding:0;right:0}:host([active]) .list{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);opacity:1;max-height:100vh;visibility:visible;pointer-events:initial;overflow-y:scroll}.selections calcite-chip{margin-right:var(--calcite-combobox-item-spacing-unit-s);margin-bottom:var(--calcite-combobox-item-spacing-unit-s)}.selections calcite-chip:last-child{margin-right:0}:host([dir=rtl]) .selections calcite-chip{margin-right:unset;margin-left:var(--calcite-combobox-item-spacing-unit-s)}:host([dir=rtl]) .selections calcite-chip:last-child{margin-left:0}.item{display:block}";export{et as calcite_combobox}