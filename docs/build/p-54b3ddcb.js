import{h as t,H as s}from"./p-8eaaeedc.js";import{C as i}from"./p-e6d22421.js";import{f as e,g as n}from"./p-4230ce12.js";import{g as a}from"./p-cf80779e.js";import{C as o}from"./p-c55f1634.js";import{d as r}from"./p-bdefc18b.js";function c(){this.setUpItems(),this.setUpFilter()}const h=["ArrowUp","ArrowDown"];function l(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=r(b.bind(this),0)}function f(){this.observer.observe(this.el,{childList:!0,subtree:!0})}function u(){this.observer.disconnect()}function d(t){const{selectedValues:s}=this,{item:i,value:e,selected:n,shiftPressed:a}=t.detail;n?(this.multiple||this.deselectSiblingItems(i),this.multiple&&a&&this.selectSiblings(i),s.set(e,i)):(s.delete(e),this.multiple&&a&&this.selectSiblings(i,!0)),this.multiple||j(i,n),this.lastSelectedItem=i,this.emitCalciteListChange()}function p(t){t.stopPropagation();const s=t.detail.oldValue,i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s),i.set(t.detail.newValue,e)}}function m(t){const{key:s,target:i}=t;if(!function(t){return!!h.find(s=>s===t)}(s))return;const{items:n,multiple:o}=this,{length:r}=n,c=n.indexOf(i);if(!r||-1===c)return;t.preventDefault();const l=n[a(c+("ArrowUp"===s?-1:1),r)];j(l,!0),e(l),o||(l.selected=!0)}function b(){this.calciteListChange.emit(this.selectedValues)}function j(t,s){s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1")}function g(){const{multiple:t,items:s}=this;if(0!==s.length)return t?s[0].setFocus():(s.find(t=>t.selected)||s[0]).setFocus()}function v(t){this.items=Array.from(this.el.querySelectorAll(t));let s=!1;const{items:i}=this;i.forEach(t=>{t.icon=this.getIconType(),t.compact=this.compact,this.multiple||(t.disableDeselect=!0,j(t,!1)),t.selected&&(s=!0,j(t,!0),this.selectedValues.set(t.value,t))});const[e]=i;!s&&e&&j(e,!0)}function x(t){this.items.forEach(s=>{s.value!==t.value&&(s.toggleSelected(!1),this.selectedValues.has(s.value)&&this.selectedValues.delete(s.value))})}function F(t,s=!1){if(!this.lastSelectedItem)return;const{items:i}=this,e=i.findIndex(t=>t.value===this.lastSelectedItem.value),n=i.findIndex(s=>s.value===t.value);i.slice(Math.min(e,n),Math.max(e,n)).forEach(t=>{t.toggleSelected(!s),s?this.selectedValues.delete(t.value):this.selectedValues.set(t.value,t)})}function O(t){const s=t.detail.map(t=>t.value);this.items.forEach(t=>{const i=t.parentElement.matches("calcite-pick-list-group");if(t.hidden=-1===s.indexOf(t.value),i){const i=n(t.parentElement,"parent-item");null!==i&&(-1!==s.indexOf(i.value)&&(t.hidden=!1),-1!==s.indexOf(t.value)&&(i.hidden=!1))}})}function w(){return this.items.map(t=>({label:t.textLabel,description:t.textDescription,metadata:t.metadata,value:t.value}))}const y=e=>{var{props:n}=e,a=function(t,s){var i={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(i[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(e=Object.getOwnPropertySymbols(t);n<e.length;n++)s.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(i[e[n]]=t[e[n]])}return i}(e,["props"]);const{disabled:r,loading:c,filterEnabled:h,dataForFilter:l,handleFilter:f,textFilterPlaceholder:u}=n;return t(s,Object.assign({role:"menu","aria-disabled":r.toString(),"aria-busy":c.toString()},a),t("header",{class:{[o.sticky]:!0}},h?t("calcite-filter",{data:l,textPlaceholder:u,"aria-label":u,onCalciteFilterChange:f}):null,t("slot",{name:"menu-actions"})),t("slot",null),((s,e)=>t(i,{loading:s,disabled:e}))(c,r))};export{y as L,f as a,d as b,u as c,x as d,p as e,v as f,w as g,O as h,l as i,g as j,m as k,c as m,F as s}