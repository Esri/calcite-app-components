<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />

    <title>Calcite App Components: calcite-shell</title>

    <script src="../_assets/head.js"></script>

    <link rel="stylesheet" href="https://js.arcgis.com/4.15/esri/themes/light/main.css" />
    <link rel="stylesheet" href="./mvb-simulator.css" />
    <script src="https://js.arcgis.com/4.15/"></script>
    <style>
      html,
      body,
      main,
      .shell-container {
        position: relative;
        width: 100%;
        height: 100%;
      }
    </style>
    <style>
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>

    <script>
      require(["esri/WebMap", "esri/views/MapView", "esri/widgets/LayerList"], function(WebMap, MapView, LayerList) {
        const webmap = new WebMap({
          portalItem: {
            id: "cc316ca9e0824970ad29ac558161d42d"
          }
        });
        // const map = new Map({
        //   basemap: "gray-vector"
        // });

        const view = new MapView({
          container: "viewDiv",
          map: webmap,
          padding: {left: 49}
        });
        view.when(function() {
        //   var layerList = new LayerList({
        //     view: view,
        //     selectionEnabled: true,
        //     container: "layerlist-container"
        //   });

          // Add widget to the top right corner of the view
          // view.ui.add(layerList, "top-right");
        });
        fetch('layerlist.html')
        .then(data => data.text())
        .then(html => document.getElementById('layerlist-container').innerHTML = html);
      });
    </script>
  </head>
  <body>
    <main>
      <div class="shell-container">
        <calcite-shell>
          <calcite-shell-panel id="primary-panel" slot="primary-panel" position="start" detached detached-scale="l">
            <!-- <calcite-panel
              id="shell-floating-panel"
              slot="shell-floating-panel"
              heading="Anchored Shell Floating Panel"
              placement="anchor"
              hidden
              ><span>
                Shell Floating Panel Content
              </span>
            </calcite-panel>
            <calcite-panel
              id="shell-floating-panel-over"
              slot="shell-floating-panel"
              heading="Over Shell Floating Panel"
              placement="over"
              hidden
              ><span>
                Shell Floating Panel Content
              </span>
            </calcite-panel> -->

            <calcite-action-bar slot="action-bar" theme="dark">
              <calcite-action-group>
                <calcite-action text="New">
                  <calcite-icon icon="plus" scale="s"></calcite-icon>
                </calcite-action>
                <calcite-action text="Save" disabled>
                  <calcite-icon icon="save" scale="s"></calcite-icon>
                </calcite-action>
            </calcite-action-group>
            <calcite-action-group>
                <calcite-action text="Layers" active>
                  <calcite-icon icon="layers" scale="s"></calcite-icon>
                </calcite-action>
                <calcite-action text="An unbelievably long title">
                  <calcite-icon icon="plus" scale="s"></calcite-icon>
                </calcite-action>
                <calcite-action text="Save" disabled>
                  <calcite-icon icon="save" scale="s"></calcite-icon>
                </calcite-action>
                <calcite-action text="Layers">
                  <calcite-icon icon="layers" scale="s"></calcite-icon>
                </calcite-action>
              </calcite-action-group>
            </calcite-action-bar>
            <div id="layerlist-container"></div>
          </calcite-shell-panel>

          <calcite-shell-panel slot="contextual-panel" position="end">
            <calcite-action-bar slot="action-bar">
              <calcite-action-group>
                <calcite-action text="Layer properties" icon="sliders-horizontal"> </calcite-action>
                <calcite-action text="Styles" icon="shapes"> </calcite-action>
                <calcite-action text="Filter" icon="layer-filter"> </calcite-action>
                <calcite-action text="Configure pop-ups" icon="popup" active> </calcite-action>
                <calcite-action text="Configure attributes" icon="feature-details"> </calcite-action>
                <calcite-action text="Labels" icon="label"> </calcite-action>
                <calcite-action text="Tablew" icon="table"> </calcite-action>
              </calcite-action-group>
              <calcite-action-group>
                <calcite-action text="Save" disabled>
                  <calcite-icon icon="save" scale="s"></calcite-icon>
                </calcite-action>
                <calcite-action text="Layers">
                  <calcite-icon icon="layers" scale="s"></calcite-icon>
                </calcite-action>
              </calcite-action-group>
              <calcite-action-group slot="bottom-actions">
                <calcite-action text="Tips" id="tip-manager-button">
                  <calcite-icon icon="lightbulb" scale="s"></calcite-icon>
                </calcite-action>
              </calcite-action-group>
            </calcite-action-bar>
            <calcite-flow id="flow">
              <calcite-flow-item
                heading="Configure popup"
                summary="Popular Demographics in the United States (Beta) - County"
              >
                <calcite-action slot="menu-actions" text="Switch layer" icon="caret-down"></calcite-action>

                <section class="enable-label">
                  <span class="enable-label__text">Enable popup</span>
                  <calcite-switch scale="s" switched></calcite-switch>
                </section>
                <div class="combo-button flow-list-item">
                    <button class="combo-button__main">
                        Manage expresions
                    </button>
                    <calcite-action class="combo-action" icon="chevron-right"  scale="s"></calcite-action>
                </div>
                <calcite-sortable-list>
                  <calcite-block drag-handle heading="Attributes" summary="2/98" open collapsible>
                    <calcite-icon icon="feature-details" scale="m" slot="icon"></calcite-icon>
                    <calcite-action slot="control" icon="ellipsis" scale="m"></calcite-action>
                    <!-- <calcite-button appearance="transparent" width="full" scale="s"> -->
                      <!-- Select attributes -->
                    </calcite-button>
                    <calcite-value-list drag-enabled>
                      <calcite-value-list-item
                        text-label="2018 Total Households (Esri)"
                        text-description="{TOTHH_CY}"
                      ></calcite-value-list-item>
                      <calcite-value-list-item
                        text-label="2018 Average Household Size (Esri)"
                        text-description="{AVGHHSZ_CY}"
                      ></calcite-value-list-item>
                    </calcite-value-list>
                    <div class="row">
                        <calcite-button id="attribute-add" round icon="plus" scale="xs" color="light">Select attributes</calcite-button>
                        <!-- <calcite-tooltip reference-element="attribute-add" disable-pointer>
                            Select attributes
                        </calcite-tooltip> -->
                    </div>
                  </calcite-block>
                  <calcite-block drag-handle heading="Image" open collapsible>
                    <calcite-icon icon="image" scale="m" slot="icon"></calcite-icon>
                    <calcite-action slot="control" icon="ellipsis" scale="m"></calcite-action>
                    <section class="form-section">
                      <div class="combo-control">
                        <span class="combo-control__label">
                          URL
                        </span>
                        <div class="combo-button">
                          <button class="combo-button__main">
                            https://ca-times.brightspotcdn.com/dims4/default/
                          </button>
                          <calcite-action class="combo-action" scale="s" icon="code"></calcite-action>
                        </div>
                      </div>
                    </section>
                    <calcite-block-section text="Options">
                      <section class="form-section">
                        <div class="combo-control">
                          <span class="combo-control__label">
                            Title
                          </span>
                          <div class="combo-button">
                            <button class="combo-button__main">
                              <span class="placeholder">My cool title</span>
                            </button>
                            <calcite-action class="combo-action" scale="s" icon="code"></calcite-action>
                          </div>
                        </div>
                        <div class="combo-control">
                          <span class="combo-control__label">
                            Caption
                          </span>
                          <div class="combo-button">
                            <button class="combo-button__main">
                              <span class="placeholder">My cool caption</span>
                            </button>
                            <calcite-action class="combo-action" scale="s" icon="code"></calcite-action>
                          </div>
                        </div>
                        <div class="combo-control">
                          <span class="combo-control__label">
                            Link
                          </span>
                          <div class="combo-button">
                            <button class="combo-button__main">
                              <span class="placeholder">My URL link</span>
                            </button>
                            <calcite-action class="combo-action" scale="s" icon="code"></calcite-action>
                          </div>
                        </div>
                      </section>
                    </calcite-block-section>
                  </calcite-block>
                  <calcite-block drag-handle heading="Text" summary="Cool. he {expression/..." open collapsible>
                    <calcite-icon icon="image" scale="m" slot="icon"></calcite-icon>
                    <calcite-action slot="control" icon="ellipsis" scale="m"></calcite-action>
                    <button class="multiline-button">Cool. he {expression/expr1} population is {expression/expr2}%...</button>
                  </calcite-block>
                </calcite-sortable-list>
                <calcite-fab slot="fab" id="label-fab" text="Add label class"></calcite-fab>
                <calcite-tooltip reference-element="label-fab" disable-pointer>
                  <!-- <img src="https://placekitten.com/200/200" /> -->
                  Add label class
                </calcite-tooltip>
              </calcite-flow-item>
            </calcite-flow>
          </calcite-shell-panel>
          <div slot="shell-header">
            <header class="header">
              <h2 class="heading">My App</h2>
            </header>
          </div>
          <calcite-tip-manager slot="tip-manager" id="tip-manager" hidden>
            <calcite-tip-group text-group-title="Astronomy">
              <calcite-tip heading="The Red Rocks and Blue Water">
                <img slot="thumbnail" src="https://placeimg.com/1000/600/city" alt="This is an image." />
                <p>
                  This tip is how a tip should really look. It has a landscape or square image and a small amount of
                  text content. This paragraph is in an "info" slot.
                </p>
                <p>
                  This is another paragraph in a subsequent "info" slot. In publishing and graphic design, Lorem ipsum
                  is a placeholder text commonly used to demonstrate the visual form of a document without relying on
                  meaningful content (also called greeking). Replacing the actual content with placeholder text allows
                  designers to design the form of the content before the content itself has been produced.
                </p>
                <a href="http://www.esri.com">This is the "link" slot.</a>
              </calcite-tip>
              <calcite-tip heading="The Long Trees">
                <img slot="thumbnail" src="https://placeimg.com/1000/600/nature" alt="This is an image." />
                <p>
                  This tip has an image that is a pretty tall. And the text will run out before the end of the image.
                </p>
                <p>In astronomy, the terms object and body are often used interchangeably.</p>
                <a href="http://www.esri.com">View Esri</a>
              </calcite-tip>
            </calcite-tip-group>
            <calcite-tip heading="Square Nature">
              <img slot="thumbnail" src="https://placeimg.com/1000/1000/nature" alt="This is an image." />
              <p>
                This tip has an image that is square. And the text will run out before the end of the image.
              </p>
              <p>In astronomy, the terms object and body are often used interchangeably.</p>
              <p>
                In publishing and graphic design, Lorem ipsum is a placeholder text commonly used to demonstrate the
                visual form of a document without relying on meaningful content (also called greeking). Replacing the
                actual content with placeholder text allows designers to design the form of the content before the
                content itself has been produced.
              </p>
              <a href="http://www.esri.com">View Esri</a>
            </calcite-tip>
            <calcite-tip heading="The lack of imagery">
              <p>
                This tip has no image. As such, the content area will take up the entire width of the tip.
              </p>
              <p>
                This is the next paragraph and should show how wide the content area is now. Of course, the width of the
                overall tip will affect things. In astronomy, the terms object and body are often used interchangeably.
              </p>
              <a href="http://www.esri.com">View Esri</a>
            </calcite-tip>
          </calcite-tip-manager>
          <div id="viewDiv"></div>

          <footer slot="shell-footer">Footer</footer>
        </calcite-shell>
      </div>
      <calcite-popover placement="right-start" reference-element="action-pad-button" add-click-handle class="popover">
        <calcite-panel theme="light">
          <h3 class="heading" slot="header-content">WE CARE A LOT</h3>
          <calcite-pick-list filter-enabled filter-sticky>
            <calcite-action slot="menu-actions" text="options">
              <calcite-icon icon="ellipsis" scale="s"></calcite-icon>
            </calcite-action>
            <calcite-pick-list-item
              text-label="about disasters, fires, floods and killer bees"
              value="1"
            ></calcite-pick-list-item>
            <calcite-pick-list-item
              text-label="about the NASA shuttle falling in the sea"
              value="2"
            ></calcite-pick-list-item>
            <calcite-pick-list-item
              text-label="about starvation and the food that Live Aid bought"
              value="3"
            ></calcite-pick-list-item>
            <calcite-pick-list-item
              text-label="about disease, baby rock, Hudson, rock,"
              value="4"
            ></calcite-pick-list-item>
          </calcite-pick-list>
          <calcite-button slot="footer" width="half">Yeah!</calcite-button>
          <calcite-button slot="footer" width="half" appearance="clear">Naw.</calcite-button>
        </calcite-panel>
      </calcite-popover>
      <script>
        const tipManagerButton = document.getElementById("tip-manager-button");
        const tipManager = document.getElementById("tip-manager");
        tipManagerButton.addEventListener("click", function() {
          tipManager.hasAttribute("hidden")
            ? tipManager.removeAttribute("hidden")
            : tipManager.setAttribute("hidden", "");
        });

        // const actionPad = document.getElementById("action-pad");
        // const actionPadButton = document.getElementById("action-pad-button");
        // actionPadButton.addEventListener("click", function() {
        //   actionPad.hasAttribute("hidden") ? actionPad.removeAttribute("hidden") : actionPad.setAttribute("hidden", "");

        //   actionPad.positionElement = actionPadButton;
        // });

        // const shellFloatingPanel = document.getElementById("shell-floating-panel");
        // const shellFloatingPanelButton = document.getElementById("shell-floating-panel-button");
        // shellFloatingPanelButton.addEventListener("click", function() {
        //   shellFloatingPanel.hasAttribute("hidden")
        //     ? shellFloatingPanel.removeAttribute("hidden")
        //     : shellFloatingPanel.setAttribute("hidden", "");

        //   shellFloatingPanel.positionElement = shellFloatingPanelButton;
        // });

        // const shellFloatingPanelOver = document.getElementById("shell-floating-panel-over");
        // const shellFloatingPanelOverButton = document.getElementById("shell-floating-panel-over-button");
        // shellFloatingPanelOverButton.addEventListener("click", function() {
        //   shellFloatingPanelOver.hasAttribute("hidden")
        //     ? shellFloatingPanelOver.removeAttribute("hidden")
        //     : shellFloatingPanelOver.setAttribute("hidden", "");

        //   shellFloatingPanelOver.positionElement = shellFloatingPanelOverButton;
        // });

        const flowNode = document.getElementById("flow");
      </script>
    </main>
  </body>
</html>
